<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="../css/public.css"/>
    <link rel="stylesheet" href="../shopping/libs/list.css"/>
    <link rel="stylesheet" href="../shopping/libs/list.css"/>
</head>
<body>

       <!-- 顶部 -->
       <div id="top">
            <div class="margin clear">               
                <div class="t-l">
                    <s>您好，欢迎来到爱出发！</s> &nbsp;&nbsp;&nbsp;<a href="#"><img src="../image/a1.png"/> <s>上海</s>&nbsp;<input type="button" id="btn1" value="更换城市"/> <img src="../image/a2.png"/></a>
                </div>
                <div class="t-r">
                    <a href="http://localhost/xiangmu/LoginRegin/login.html">[<b>登录</b>]</a>
                    <a href="http://localhost/xiangmu/LoginRegin/reginster.html">[<b>免费注册</b>]</a>
                    &nbsp;|&nbsp;<a href="#"><img src="../image/a3.png"/> &nbsp;<input type="button" id="btn2" value="最近浏览"/><img src="../image/a2.png"/> | <img src="../image/a4.png"/> <span>手机APP</span></a>
                </div>
                <div class="changebox">
                    <ul>
                        <li>
                            <div class="cbox1">
                                <b>华南地区</b>
                            </div>
                            <div class="cbox2">
                                <s>广州</s>
                                <s>上海</s>
                                <s>北京</s>
                                <s>南京</s>
                            </div>
                        </li>
                        <li>
                            <div class="cbox1">
                                <b>华南地区</b>
                            </div>
                            <div class="cbox2">
                                <s>广州</s>
                                <s>上海</s>
                                <s>北京</s>
                                <s>南京</s>
                            </div>
                        </li>
                        <li>
                            <div class="cbox1">
                                <b>华南地区</b>
                            </div>
                            <div class="cbox2">
                                <s>广州</s>
                                <s>上海</s>
                                <s>北京</s>
                                <s>南京</s>
                            </div>
                        </li>
                        <li>
                            <div class="cbox1">
                                <b>华南地区</b>
                            </div>
                            <div class="cbox2">
                                <s>广州</s>
                                <s>上海</s>
                                <s>北京</s>
                                <s>南京</s>
                                <s>上海</s>
                                <s>北京</s>
                                <s>南京</s>
                            </div>
                        </li>
                        <li>
                            <div class="cbox1">
                                <b>华南地区</b>
                            </div>
                            <div class="cbox2">
                                <s>广州</s>
                                <s>上海</s>
                                <s>上海</s>
                                <s>北京</s>
                                <s>南京</s>
                            </div>
                        </li>
                        <li>
                            <div class="cbox1">
                                <b>华南地区</b>
                            </div>
                            <div class="cbox2">
                                <s>广州</s>
                                <s>上海</s>
                            </div>
                        </li>
                        <li>
                            <div class="cbox1">
                                <b>华南地区</b>
                            </div>
                            <div class="cbox2">
                                <s>广州</s>
                                <s>上海</s>
                                <s>北京</s>
                                <s>南京</s>
                                <s>上海</s>
                                <s>北京</s>
                                <s>南京</s>
                            </div>
                        </li>
                        <li>
                            <div class="cbox1">
                                <b>华南地区</b>
                            </div>
                            <div class="cbox2">
                                <s>广州</s>
                                <s>上海</s>
                                <s>上海</s>
                                <s>北京</s>
                                <s>南京</s>
                            </div>
                        </li>
                        <li>
                            <div class="cbox1">
                                <b>华南地区</b>
                            </div>
                            <div class="cbox2">
                                <s>广州</s>
                                <s>上海</s>
                            </div>
                        </li>
                    </ul>
                    <p>*提示：根据你选择的地区，我们将为你切换至该地区的首页</p>
                </div>
            </div>
        </div>
        <!-- 头部 -->
        <div id="header">
            <div class="margin clear">
                <div class="h-l">
                    <img src="../image/logo.png"/>
                    <p><a href="#">随心游推荐</a></p>
                </div>
                <div class="h-c">
                    <form>
                        <input type="text" id="txt" placeholder="&nbsp;&nbsp;&nbsp;目的地,酒店,景点关键词"/>
                        <input type="submit" id="sub" value="搜索"/>
                    </form>
                    <ul>
                        <li class="te"><a href="file:///D:/phpStudy/PHPTutorial/WWW/xiangmu/index.html/index.html">首页</a></li>
                        <li><a href="#">每周新品</a></li>
                        <li><a href="#">好去处</a></li>
                        <li><a href="#">团购预约</a></li>
                        <li><a href="#">手机版下载</a></li>
                    </ul>
                </div>
                <div class="h-r">
                    <div class="boxx">
                        <p1><a href="#"><img src="../image/a6.png"/> 我的爱出发</a></p1>
                        <p2><a href="#"><img src="../image/a7.png"/> 订单查询</a></p2>
                    </div>
                </div>
            </div>
        </div>

    <div class="margin">
    <div class="cont1">
            <div class="bbbox banner2">
                <div class="imgbox">
                    <img src="../shopping/img/baner1.jpg"/>
                    <img src="../shopping/img/banner2.jpg"/>
                    <img src="../shopping/img/banner3.jpg"/>
                    <img src="../shopping/img/banner4.jpg"/>
                    <img src="../shopping/img/banner5.JPG"/>
                    <img src="../shopping/img/banner6.jpg"/>
                </div>
                <div class="btns">
                    <input type="button" id="left" value="<" />
                    <input type="button" id="right" value=">" />
                </div>
            </div>
            <div class="bbbox2">
                <h3>上海|上海 上海迪士尼乐园门票</h3>
                <p>上海迪士尼乐园是充满创造力、冒险精神与无穷精彩的快乐天地，每个人都能在这里点亮心中奇梦。探索别具一格又令人难忘的六大主题园区，畅游这个神奇世界。</p>
                <div class="bbbox3">
                    <strong>￥236</strong><em>起</em><em>门市价:600元</em><em>节省362元</em>
                </div>
                <div class="bbbox4">
                    <b>好评：</b><s>96%</s>&nbsp;|&nbsp;<b>已售：</b><s>128202</s>&nbsp;|&nbsp;<b>点评：</b><s>612</s>
                </div>
            </div>
        </div>
    </div>

<div class="margin">
    <h2>商品列表&nbsp;<small><a href="http://localhost/xiangmu/shopping/car.html">去结算</a></small></h2>
    <div id="cont">
        <p>目前商城还没有开业，请稍候再来.....</p>
    </div>
</div>

 <!-- 脚部 -->
 <div id="footer">
        <div class="margin clear">
        <!-- 脚步顶部导航内容 -->
            <div class="ft">
                <ul>
                    <li>
                        <i class="i1"></i>
                        <a href="#">品质保证</a>
                    </li>
                    <li>
                        <i class="i2"></i>
                        <a href="#">无房退款</a>
                    </li>
                    <li>
                        <i class="i3"></i>   
                        <a href="#">关于我们</a>
                    </li>
                    <li>
                        <i class="i4"></i>    
                        <a href="#">帮助中心</a>
                    </li>
                    <li>
                        <i class="i5"></i>        
                        <a href="#">APP下载</a>
                    </li>
                </ul>
            </div>
        <!-- 脚步中间部分 -->
            <div class="fb">
            <!-- 中间左边列表内容 -->
                <div class="fa">
                    <dl>
                        <dt>关于爱出发</dt>
                        <a href="#"><dd>团队介绍</dd></a>
                        <a href="#"><dd>招聘信息</dd></a>
                        <a href="#"><dd>新闻动态</dd></a>
                    </dl>
                    <span class="s1"></span>
                    <dl>
                        <dt>帮助中心</dt>
                        <a href="#"><dd>常见问题</dd></a>
                        <a href="#"><dd>积分规则</dd></a>
                        <a href="#"><dd>现金券规则</dd></a>
                        <a href="#"><dd>预定说明</dd></a>
                        <a href="#"><dd>团购预约</dd></a>
                        <a href="#"><dd>支付说明</dd></a>
                    </dl>
                    <span class="s2"></span>
                    <dl>
                        <dt>客服服务</dt>
                        <a href="#"><dd>品质承诺</dd></a>
                        <a href="#"><dd>客户电话</dd></a>
                        <a href="#"><dd>自助预约</dd></a>
                        <a href="#"><dd>联系我们</dd></a>
                        <b>400-1108-4040</b>
                    </dl>
                </div>
            <!-- 中间右边二维码内容 -->
                <!-- 大框 -->
                <div class="f-box">
                    <!-- box1整体 -->
                    <div class="erbox1">
                        <img src="../image/erweima1.png"/>
                        <p>APP下载</p>
                    </div>
                    <!-- box2整体 -->
                    <div class="erbox2">
                        <img src="../image/erweima2.png"/>
                        <p>微信公众号</p>
                    </div>
                </div>

            </div>  <!--class="fb"结束部分-->


            <!-- 脚步最底下内容 -->
            <div class="fbot">
                <!-- 友情链接 -->
                    <div class="youqing">
                        <h4>友情链接:&nbsp;</h4>
                        <ul>
                            <li><a href="#">酷伢亲子房</a></li>
                            <li><a href="#">亲子房</a></li>
                            <li><a href="#">如影旅游网</a></li>
                            <li><a href="#">亲子游记</a></li>
                            <li><a href="#">内蒙古旅游网</a></li>
                            <li><a href="#">四川旅游景点</a></li>
                            <li><a href="#">深圳旅行社</a></li>
                            <li><a href="#">深圳景点门票</a></li>
                            <li><a href="#">京郊自驾游</a></li>
                        </ul>
                    </div>

                    <div class="tup">
                        <ul>
                            <li class="te"><a href="#"><img src="../image/f1.png"/></a></li>
                            <li><a href="#"><img src="../image/f2.png"/></a></li>
                            <li><a href="#"><img src="../image/f3.png"/></a></li>
                            <li><a href="#"><img src="../image/f4.png"/></li>
                            <li><a href="#"><img src="../image/f5.png"/></li>
                        </ul>
                    </div>
                    <div class="xinxi">
                        <p>中华人民共和国增值电信业务经营许可证 经营许可证编号：粤B2-20130613</p>
                        <p>旅行社业务经营许可证编号：L-GD01685</p>
                        <p>版权所有 © 广州酷旅旅行社有限公司 2009-2019 粤ICP备11008339号</p>
                    </div>
                
            </div>      <!--脚步fbot最底下内容结束部分-->


        </div>      <!--margin clear结束部分-->
    </div>       <!--footer结束部分-->   

</body>
<script src="../js/jquery.js"></script>
<script src="../js/jquery.banner.2.0.3.js"></script>
<script src="../js/banner.js"></script>
<script src="../ajax/ajax.js"></script>

<script src="../changeCity/js/change.js"></script>
<script src="../muem/js/muem.js"></script>
<script src="../muem/js/muemsan.js"></script>
<script src="../muem/js/muemsanli2.js"></script>
<script src="../muem/js/muemsanli3.js"></script>
<script src="../js/floor.js"></script>

<script>
class GoodsList{
    constructor(){
        this.cont = document.getElementById("cont");
        this.url = "http://localhost/xiangmu/shopping/data/goods.json";
        this.init();
        // 1.绑定事件
        this.addEvent();
    }
    addEvent(){
        var that = this;
        this.cont.onclick = function(eve){
            var e = eve || window.event;
            var t = e.target || e.srcElement;
            if(t.className == "addCar"){
                // 2.获取当前的商品ID
                that.id = t.parentNode.getAttribute("index");
                // 3.存localstorage
                that.setData();
            }
        }
    }
    setData(){
        // console.log(this.id);
        // 保存多个商品，数量，一条本地存储
        // 数组中放对象的形式处理数据
        // 每个对象是一个商品
        // 整个数组是一条本地存储
        // [{id:"adsa",num:1},{},{}]

        this.goods = localStorage.getItem("goods");

        if(this.goods){
            // 不是第一次
            this.goods = JSON.parse(this.goods)

            var onoff = true;
            // 之后存
            for(var i=0;i<this.goods.length;i++){
                // 老的
                if(this.goods[i].id == this.id){
                    this.goods[i].num++;
                    onoff = false;
                }
            }
            // 新的
            if(onoff){
                this.goods.push({
                    id:this.id,
                    num:1
                })
            }
        }else{
            // 第一次存
            //     直接存
            this.goods = [{
                id:this.id,
                num:1
            }];
        }
        
        // 最后将数据设置回去
        localStorage.setItem("goods",JSON.stringify(this.goods))
    }
    init(){
        var that = this;
        ajaxPost(this.url,function(res){
            that.res = JSON.parse(res);
            that.display()
        })
    }
    display(){
        var str = "";
        for(var i=0;i<this.res.length;i++){
            str += `<div class="box" index="${this.res[i].goodsId}">
                        <img src="${this.res[i].src}" alt="">
                        <p>${this.res[i].name}</p>
                        <span>${this.res[i].price}</span>
                        <em class="addCar">加入购物车</em>
                    </div>`;
        }
        this.cont.innerHTML = str;
    }
}
new GoodsList;


</script>
</html>